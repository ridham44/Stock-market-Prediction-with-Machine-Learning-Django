{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Ticker Info | Stock Market Prediction</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Bootstrap -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Custom Glass CSS -->
    <link href="{% static 'css/style.css' %}?v=3" rel="stylesheet" />
</head>

<body>

    <!-- Background Gradient -->
    <div class="bg-gradient"></div>

    <!-- Navbar -->
    <header class="navbar glass-card">
        <div class="navbar-left">
            <img src="{% static 'image/user.webp' %}" alt="Logo" class="logo-img" />
            <span class="logo-text">StocksInsight</span>
        </div>
        <div class="navbar-right">
            <a href="../" class="nav-link">Home</a>
            <a href="../search" class="nav-link">Predict</a>
            <a href="#" class="nav-link active">Ticker Info</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero glass-card">
        <h2>All Tickers</h2>
        <p>Check the list of available ticker symbols ðŸ“Š</p>

        <!-- Search Filter -->
        <div class="form-floating mb-3 mt-3" style="max-width: 400px; margin: 0 auto;">
            <input type="text" class="form-control" id="searchInput" placeholder="Search Ticker">
            <label for="searchInput">Search Ticker</label>
        </div>

        <!-- Table Container -->
        <div class="table-container glass-card mt-3">
            <div class="table-responsive">
                <table class="table glass-table" id="tickerTable">
                    <thead>
                        <tr>
                            <th>Ticker Symbol</th>
                            <th>Ticker Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if ticker_list %}
                        {% for i in ticker_list %}
                        <tr>
                            <td>{{ i.Symbol }}</td>
                            <td>{{ i.Name }}</td>
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr>
                            <td colspan="2" class="text-center">No tickers available.</td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer glass-card">
        <p> Created by
        <h4> <a href="#">
                Ridham Patel
            </a></h4> | All rights reserved &copy;StockInsight |</p>
    </footer>

    <!-- Search Script -->
    <script>
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('keyup', function () {
            const filter = searchInput.value.toUpperCase();
            const table = document.getElementById('tickerTable');
            const trs = table.getElementsByTagName('tr');

            for (let i = 1; i < trs.length; i++) { // skip header row
                const symbol = trs[i].getElementsByTagName('td')[0].textContent.toUpperCase();
                const name = trs[i].getElementsByTagName('td')[1].textContent.toUpperCase();

                // Show row if either Symbol or Name contains the filter text
                if (symbol.includes(filter) || name.includes(filter)) {
                    trs[i].style.display = '';
                } else {
                    trs[i].style.display = 'none';
                }
            }
        });
    </script>

</body>

</html>